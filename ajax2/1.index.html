<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script src="index.js"></script>
<script>
    //创建ajax对象
    var x = XHR();
    //注册状态变化的回调函数
    x.onreadystatechange = function () {
//        alert(x.readyState);
//        console.log(x.status,x.statusText,x.responseText);
//        console.log(x.getAllResponseHeaders());
//        console.log(x.getResponseHeader('Connection'));
        console.log(x.response);
    }
    //可以发送cookie，但是Access-Control-Allow-Origin不能是*,设置Access-Control-Allow-Credentials=true
    x.withCredentials = true;
    //初始化xhr对象
    x.open('POST','/books',true);
    x.setRequestHeader("Content-Type","application/json");
//    x.overrideMimeType("text/plain");//重写
//    x.responseType = 'json';//返回数据类型
    x.responseType = 'document';//返回数据类型
//    x.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
    x.send('{"name":"kevin","age":6}');//发送请求
//    x.send("name=kevin&age=6");//发送请求
</script>
</html>